<!DOCTYPE html>
<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Website â†’ PWA Converter</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f4f6f9;
  padding:20px;
}
h1 {
  color:#1a73e8;
}
textarea {
  width:100%;
  height:250px;
  padding:10px;
  font-family: monospace;
  border-radius:8px;
  border:1px solid #ccc;
}
input {
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ccc;
}
button {
  background:#1a73e8;
  color:white;
  border:none;
  padding:12px 20px;
  font-size:16px;
  border-radius:10px;
  cursor:pointer;
}
button:hover {
  background:#0f5edc;
}
</style>
</head>

<body>

<h1>ğŸŒ Website â†’ PWA App Converter</h1>

<p>ğŸ‘‡ à®‰à®™à¯à®•à®³à¯ Website HTML code à®‡à®™à¯à®•à¯‡ paste à®ªà®£à¯à®£à¯à®™à¯à®•</p>

<textarea id="htmlCode" placeholder="Paste your WEBSITE HTML code here..."></textarea>

<input id="appName" placeholder="App Name (example: Rock RO System)">
<input id="shortName" placeholder="Short Name (example: RockRO)">
<input id="themeColor" placeholder="Theme Color (example: #1a73e8)">

<button onclick="convertPWA()">Convert to PWA App & Download ZIP</button>

<canvas id="canvas" style="display:none"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
async function convertPWA() {

  const html = document.getElementById("htmlCode").value.trim();
  if(!html){
    alert("Website HTML code paste à®ªà®£à¯à®£à¯à®™à¯à®•!");
    return;
  }

  const appName = document.getElementById("appName").value || "My PWA App";
  const shortName = document.getElementById("shortName").value || "PWA";
  const themeColor = document.getElementById("themeColor").value || "#1a73e8";

  const zip = new JSZip();

  // ---------- index.html ----------
  const indexHTML = `
<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${appName}</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="${themeColor}">
<link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body>

${html}

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js');
  });
}
</script>

</body>
</html>
`;
  zip.file("index.html", indexHTML);

  // ---------- manifest.json ----------
  const manifest = {
    name: appName,
    short_name: shortName,
    start_url: "index.html",
    display: "standalone",
    background_color: "#ffffff",
    theme_color: themeColor,
    icons: [
      { src: "icons/icon-128x128.png", sizes: "128x128", type: "image/png" },
      { src: "icons/icon-192x192.png", sizes: "192x192", type: "image/png" },
      { src: "icons/icon-256x256.png", sizes: "256x256", type: "image/png" },
      { src: "icons/icon-512x512.png", sizes: "512x512", type: "image/png" }
    ]
  };
  zip.file("manifest.json", JSON.stringify(manifest, null, 2));

  // ---------- service-worker.js ----------
  const sw = `
const CACHE_NAME = "pwa-cache-v1";
const FILES = [
  "/",
  "/index.html",
  "/manifest.json"
];

self.addEventListener("install", e => {
  e.waitUntil(
    caches.open(CACHE_NAME).then(cache => cache.addAll(FILES))
  );
  self.skipWaiting();
});

self.addEventListener("fetch", e => {
  e.respondWith(
    caches.match(e.request).then(r => r || fetch(e.request))
  );
});
`;
  zip.file("service-worker.js", sw);

  // ---------- icons ----------
  const iconsFolder = zip.folder("icons");
  const sizes = [128,192,256,512];
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  for(let size of sizes){
    canvas.width = size;
    canvas.height = size;
    ctx.fillStyle = themeColor;
    ctx.fillRect(0,0,size,size);
    ctx.fillStyle = "white";
    ctx.font = `${size/5}px Arial`;
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(shortName[0] || "P", size/2, size/2);
    const blob = await new Promise(r => canvas.toBlob(r));
    iconsFolder.file(`icon-${size}x${size}.png`, blob);
  }

  // ---------- ZIP Download ----------
  const content = await zip.generateAsync({type:"blob"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(content);
  a.download = "pwa-app.zip";
  a.click();
}
</script>

</body>
</html>